# 什么是并发
同时拥有两个或者多个线程，如果程序在单核处理器上运行，多个线程将交替地换入或者换出内存，这些线程是同时“存在”的，每个线程都处于执行过程中的某个状态，如果运行在多核处理器上，此时，程序中的每个线程都将分配到一个处理器核上，因此可以同时运行。  
# 什么是高并发
高并发（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素之一，它通常是指，通过设计保证系统能够同时并行处理很多请求。
# 对比并发和高并发
并发：多个线程操作相同的资源，保证线程安全，合理使用资源  
高并发：服务能同时处理很多请求，提高程序性能

# CPU多级缓存
## 为什么需要CPU cache?  
CPU的频率很快，快到主存跟不上，这样在处理器时钟周期内，CPU常常需要等待主存，浪费资源。
所以cache的出现，是为了缓解CPU和内存之间速度的不匹配问题。（结构：cpu->cache->memory）

## CPU cache有什么意义?  
1. 时间局部性：如果某个数据被访问，那么在不久的将来它很可能再次被访问；
2. 空间局部性：如果某个数据被访问，那么与它相邻的数据很快也可能被访问；

## 缓存一致性（MESI）

状态 | 描述
---|---
M(Modified) | 这行数据有效，数据被修改了，和内存中的数据不一致，数据只存在于本Cache中
E(Exclusive) | 这行数据有效，数据和内存中的数据一致，数据只存在于本Cache中。
S(Shared) |这行数据有效，数据和内存中的数据一致，数据存在于很多Cache中。
I(Invalid) |这行数据无效。

M(Modified)和E(Exclusive)状态的Cache line，数据是独有的，不同点在于M状态的数据是dirty的(和内存的不一致)，E状态的数据是clean的(和内存的一致)。

S(Shared)状态的Cache line，数据和其他Core的Cache共享。只有clean的数据才能被多个Cache共享。  

I(Invalid)表示这个Cache line无效。

注意缓存一致性。

推荐这篇文章：
https://blog.csdn.net/muxiqingyang/article/details/6615199